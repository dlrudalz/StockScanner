2025-09-01 16:47:41,035 - MarketRegimeScanner - INFO - Using local timezone: America/Chicago
2025-09-01 16:47:41,035 - MarketRegimeScanner - INFO - Database path: C:\Users\kyung\StockScanner\core\ticker_data.db
2025-09-01 16:47:41,035 - MarketRegimeScanner - INFO - Using composite indices: ^IXIC
2025-09-01 16:47:41,037 - MarketRegimeScanner - INFO - Market regime database path: C:\Users\kyung\StockScanner\core\market_regime_data.db
2025-09-01 16:47:41,052 - MarketRegimeScanner - INFO - Loaded 3251 tickers from database
2025-09-01 16:47:41,054 - MarketRegimeScanner - INFO - Ticker scanner started
2025-09-01 16:47:41,054 - MarketRegimeScanner - INFO - Market regime scanner started
2025-09-01 16:47:41,056 - MarketRegimeScanner - INFO - Starting immediate ticker scan on startup
2025-09-01 16:47:41,056 - MarketRegimeScanner - INFO - Starting full ticker refresh
2025-09-01 16:47:41,056 - MarketRegimeScanner - INFO - Fetching tickers for composite index ^IXIC
2025-09-01 16:47:42,237 - MarketRegimeScanner - INFO - Completed ^IXIC: 3251 stocks across 6 pages
2025-09-01 16:47:42,338 - MarketRegimeScanner - INFO - Ticker refresh completed in 1.28s
2025-09-01 16:47:42,339 - MarketRegimeScanner - INFO - Total: 3251 | Added: 0 | Removed: 0
2025-09-01 16:47:42,339 - MarketRegimeScanner - INFO - Database: 0 inserted, 3251 updated
2025-09-01 16:47:42,342 - MarketRegimeScanner - INFO - Initial ticker scan completed successfully
2025-09-01 16:47:42,342 - MarketRegimeScanner - INFO - Next ticker refresh scheduled at 2025-09-02 08:30:00-05:00 (15.0 hours and 42.0 minutes from now)
2025-09-01 16:47:43,072 - MarketRegimeScanner - INFO - Waiting for initial ticker scan to complete before starting market regime scan
2025-09-01 16:47:48,087 - MarketRegimeScanner - INFO - Starting immediate market regime scan
2025-09-01 16:47:48,087 - MarketRegimeScanner - INFO - Starting market regime scan
2025-09-01 16:47:48,087 - MarketRegimeScanner - INFO - Fetching 365 days of market data for regime analysis
2025-09-01 16:47:48,254 - MarketRegimeScanner - INFO - Fetched market data with shape: (249, 1)
2025-09-01 16:47:48,354 - MarketRegimeScanner - INFO - Calculated advanced features with shape: (245, 13)
2025-09-01 16:47:48,531 - MarketRegimeScanner - WARNING - Final features contain 1092 NaN values, filling with zeros
2025-09-01 16:47:52,169 - MarketRegimeScanner - INFO - Deep learning models trained
2025-09-01 16:47:52,289 - MarketRegimeScanner - INFO - Enhanced ensemble model training completed
2025-09-01 16:47:52,290 - MarketRegimeScanner - INFO - PCA explained variance ratio: 0.969
2025-09-01 16:47:52,328 - MarketRegimeScanner - ERROR - Error during market regime scan: cannot access local variable 'transition_prob' where it is not associated with a value
2025-09-01 16:47:52,330 - MarketRegimeScanner - ERROR - Traceback (most recent call last):
  File "c:\Users\kyung\StockScanner\core\backtest\marketregime_with_backtest.py", line 1858, in scan_market_regime
    regime, confidence, feature_values = self.predict_enhanced_regime(features)
                                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "c:\Users\kyung\StockScanner\core\backtest\marketregime_with_backtest.py", line 1740, in predict_enhanced_regime
    feature_values['transition_probability'] = transition_prob
                                               ^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'transition_prob' where it is not associated with a value

2025-09-01 16:47:52,332 - MarketRegimeScanner - WARNING - Initial market regime scan encountered errors
2025-09-01 16:47:52,332 - MarketRegimeScanner - INFO - Next market regime scan at 17:00:00 (0.0 hours and 12.0 minutes from now)
2025-09-01 16:49:57,359 - MarketRegimeScanner - INFO - Ticker scanner stopped
2025-09-01 16:49:57,360 - MarketRegimeScanner - INFO - Market regime scanner stopped
2025-09-01 16:49:57,360 - MarketRegimeScanner - INFO - Sleep interrupted by shutdown
2025-09-01 16:49:57,360 - MarketRegimeScanner - INFO - Sleep interrupted by shutdown
2025-09-01 16:49:57,360 - MarketRegimeScanner - INFO - Main task cancelled
2025-09-01 16:49:57,360 - MarketRegimeScanner - INFO - Ticker scanner stopped
2025-09-01 16:49:57,360 - MarketRegimeScanner - INFO - Ticker scanner shutdown complete
2025-09-01 16:49:57,361 - MarketRegimeScanner - INFO - Market regime scanner stopped
2025-09-01 16:49:57,361 - MarketRegimeScanner - INFO - Market regime scanner shutdown complete
