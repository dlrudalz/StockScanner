2025-09-01 16:55:16,467 - MarketRegimeScanner - INFO - Using local timezone: America/Chicago
2025-09-01 16:55:16,467 - MarketRegimeScanner - INFO - Database path: C:\Users\kyung\StockScanner\core\ticker_data.db
2025-09-01 16:55:16,467 - MarketRegimeScanner - INFO - Using composite indices: ^IXIC
2025-09-01 16:55:16,469 - MarketRegimeScanner - INFO - Market regime database path: C:\Users\kyung\StockScanner\core\market_regime_data.db
2025-09-01 16:55:16,484 - MarketRegimeScanner - INFO - Loaded 3251 tickers from database
2025-09-01 16:55:16,485 - MarketRegimeScanner - INFO - Ticker scanner started
2025-09-01 16:55:16,486 - MarketRegimeScanner - INFO - Market regime scanner started
2025-09-01 16:55:16,487 - MarketRegimeScanner - INFO - Starting immediate ticker scan on startup
2025-09-01 16:55:16,487 - MarketRegimeScanner - INFO - Starting full ticker refresh
2025-09-01 16:55:16,487 - MarketRegimeScanner - INFO - Fetching tickers for composite index ^IXIC
2025-09-01 16:55:17,725 - MarketRegimeScanner - INFO - Completed ^IXIC: 3251 stocks across 6 pages
2025-09-01 16:55:17,808 - MarketRegimeScanner - INFO - Ticker refresh completed in 1.32s
2025-09-01 16:55:17,808 - MarketRegimeScanner - INFO - Total: 3251 | Added: 0 | Removed: 0
2025-09-01 16:55:17,808 - MarketRegimeScanner - INFO - Database: 0 inserted, 3251 updated
2025-09-01 16:55:17,810 - MarketRegimeScanner - INFO - Initial ticker scan completed successfully
2025-09-01 16:55:17,810 - MarketRegimeScanner - INFO - Next ticker refresh scheduled at 2025-09-02 08:30:00-05:00 (15.0 hours and 34.0 minutes from now)
2025-09-01 16:55:18,492 - MarketRegimeScanner - INFO - Waiting for initial ticker scan to complete before starting market regime scan
2025-09-01 16:55:23,508 - MarketRegimeScanner - INFO - Starting immediate market regime scan
2025-09-01 16:55:23,509 - MarketRegimeScanner - INFO - Starting market regime scan
2025-09-01 16:55:23,509 - MarketRegimeScanner - INFO - Fetching 365 days of market data for regime analysis
2025-09-01 16:55:23,673 - MarketRegimeScanner - INFO - Fetched market data with shape: (249, 1)
2025-09-01 16:55:23,675 - MarketRegimeScanner - ERROR - Error during market regime scan: Length of values (248) does not match length of index (249)
2025-09-01 16:55:23,719 - MarketRegimeScanner - ERROR - Traceback (most recent call last):
  File "c:\Users\kyung\StockScanner\core\backtest\marketregime_with_backtest.py", line 1967, in scan_market_regime
    basic_features = self.calculate_advanced_features(market_data)
  File "c:\Users\kyung\StockScanner\core\backtest\marketregime_with_backtest.py", line 1370, in calculate_advanced_features
    features[f'{ticker}_volatility_ratio'] = volatility_ratio
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kyung\AppData\Local\Programs\Python\Python313\Lib\site-packages\pandas\core\frame.py", line 4316, in __setitem__
    self._set_item(key, value)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\kyung\AppData\Local\Programs\Python\Python313\Lib\site-packages\pandas\core\frame.py", line 4529, in _set_item
    value, refs = self._sanitize_column(value)
                  ~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\kyung\AppData\Local\Programs\Python\Python313\Lib\site-packages\pandas\core\frame.py", line 5273, in _sanitize_column
    com.require_length_match(value, self.index)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kyung\AppData\Local\Programs\Python\Python313\Lib\site-packages\pandas\core\common.py", line 573, in require_length_match
    raise ValueError(
    ...<4 lines>...
    )
ValueError: Length of values (248) does not match length of index (249)

2025-09-01 16:55:23,720 - MarketRegimeScanner - WARNING - Initial market regime scan encountered errors
2025-09-01 16:55:23,720 - MarketRegimeScanner - INFO - Next market regime scan at 17:00:00 (0.0 hours and 4.0 minutes from now)
2025-09-01 16:57:36,649 - MarketRegimeScanner - INFO - Ticker scanner stopped
2025-09-01 16:57:36,649 - MarketRegimeScanner - INFO - Market regime scanner stopped
2025-09-01 16:57:36,649 - MarketRegimeScanner - INFO - Main task cancelled
2025-09-01 16:57:36,650 - MarketRegimeScanner - INFO - Ticker scanner stopped
2025-09-01 16:57:36,650 - MarketRegimeScanner - INFO - Ticker scanner shutdown complete
2025-09-01 16:57:36,650 - MarketRegimeScanner - INFO - Market regime scanner stopped
2025-09-01 16:57:36,650 - MarketRegimeScanner - INFO - Market regime scanner shutdown complete
2025-09-01 16:57:36,650 - MarketRegimeScanner - INFO - Sleep interrupted by shutdown
2025-09-01 16:57:36,650 - MarketRegimeScanner - INFO - Sleep interrupted by shutdown
