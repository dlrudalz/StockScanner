2025-09-01 14:04:49,354 - MarketRegimeScanner - INFO - Using local timezone: America/Chicago
2025-09-01 14:04:49,354 - MarketRegimeScanner - INFO - Database path: C:\Users\kyung\StockScanner\core\ticker_data.db
2025-09-01 14:04:49,354 - MarketRegimeScanner - INFO - Using composite indices: ^IXIC
2025-09-01 14:04:49,356 - MarketRegimeScanner - INFO - Market regime database path: C:\Users\kyung\StockScanner\core\market_regime_data.db
2025-09-01 14:04:49,372 - MarketRegimeScanner - INFO - Loaded 3251 tickers from database
2025-09-01 14:04:49,373 - MarketRegimeScanner - INFO - Ticker scanner started
2025-09-01 14:04:49,374 - MarketRegimeScanner - INFO - Market regime scanner started
2025-09-01 14:04:49,380 - MarketRegimeScanner - INFO - Starting immediate ticker scan on startup
2025-09-01 14:04:49,380 - MarketRegimeScanner - INFO - Starting full ticker refresh
2025-09-01 14:04:49,381 - MarketRegimeScanner - INFO - Fetching tickers for composite index ^IXIC
2025-09-01 14:04:50,647 - MarketRegimeScanner - INFO - Completed ^IXIC: 3251 stocks across 6 pages
2025-09-01 14:04:50,727 - MarketRegimeScanner - INFO - Ticker refresh completed in 1.35s
2025-09-01 14:04:50,728 - MarketRegimeScanner - INFO - Total: 3251 | Added: 0 | Removed: 0
2025-09-01 14:04:50,728 - MarketRegimeScanner - INFO - Database: 0 inserted, 3251 updated
2025-09-01 14:04:50,729 - MarketRegimeScanner - INFO - Initial ticker scan completed successfully
2025-09-01 14:04:50,730 - MarketRegimeScanner - INFO - Next ticker refresh scheduled at 2025-09-02 08:30:00-05:00 (18.0 hours and 25.0 minutes from now)
2025-09-01 14:04:51,383 - MarketRegimeScanner - INFO - Waiting for initial ticker scan to complete before starting market regime scan
2025-09-01 14:04:56,398 - MarketRegimeScanner - INFO - Starting immediate market regime scan
2025-09-01 14:04:56,399 - MarketRegimeScanner - INFO - Starting market regime scan
2025-09-01 14:04:56,399 - MarketRegimeScanner - INFO - Fetching 365 days of market data for regime analysis
2025-09-01 14:04:56,568 - MarketRegimeScanner - INFO - Fetched market data with shape: (249, 1)
2025-09-01 14:04:56,649 - MarketRegimeScanner - INFO - Calculated advanced features with shape: (199, 13)
2025-09-01 14:04:58,397 - MarketRegimeScanner - INFO - Enhanced ensemble model training completed
2025-09-01 14:04:58,397 - MarketRegimeScanner - INFO - PCA explained variance ratio: 0.998
2025-09-01 14:04:58,413 - MarketRegimeScanner - ERROR - Database connection error: NOT NULL constraint failed: market_regimes.regime_label
2025-09-01 14:04:58,414 - MarketRegimeScanner - ERROR - Database write error: NOT NULL constraint failed: market_regimes.regime_label, Query: INSERT OR REPLACE INTO market_regimes 
               (timestamp, regime, confidence, features, model_version) 
               VALUES (?, ?, ?, ?, ?), Params: (datetime.datetime(2025, 9, 1, 14, 4, 58, 412655), np.int64(0), np.float64(0.6670869576585461), '{"^IXIC_return": 0.006651884700665134, "^IXIC_volatility_ratio": 1.0387919172424633, "^IXIC_momentum_ratio": 1.155581283934845, "^IXIC_volatility_clustering": 0.29809684283782834, "^IXIC_jumps": 1.0, "^IXIC_rsi": 63.42281879194632, "^IXIC_macd": 0.478824792168254, "^IXIC_macd_signal": 0.4878626345518451, "^IXIC_bollinger_upper": 9.579039237730957, "^IXIC_bollinger_lower": 7.787960762269042, "^IXIC_bollinger_pct": 0.7213750013928031, "market_breadth": 0.4, "term_structure": 0.0, "anomaly_score": -0.4871697931748605, "model_agreement": 0.5}', 'enhanced_v3.0')
2025-09-01 14:04:58,414 - MarketRegimeScanner - INFO - Current market regime: Bear Market (confidence: 0.67)
2025-09-01 14:04:58,414 - MarketRegimeScanner - INFO - Market regime scan completed in 2.01s
2025-09-01 14:04:58,414 - MarketRegimeScanner - INFO - Initial market regime scan completed successfully
2025-09-01 14:04:58,414 - MarketRegimeScanner - INFO - Next market regime scan at 15:00:00 (0.0 hours and 55.0 minutes from now)
2025-09-01 14:06:28,112 - MarketRegimeScanner - INFO - Ticker scanner stopped
2025-09-01 14:06:28,112 - MarketRegimeScanner - INFO - Market regime scanner stopped
2025-09-01 14:06:28,113 - MarketRegimeScanner - INFO - Sleep interrupted by shutdown
2025-09-01 14:06:28,113 - MarketRegimeScanner - INFO - Main task cancelled
2025-09-01 14:06:28,113 - MarketRegimeScanner - INFO - Ticker scanner stopped
2025-09-01 14:06:28,113 - MarketRegimeScanner - INFO - Ticker scanner shutdown complete
2025-09-01 14:06:28,114 - MarketRegimeScanner - INFO - Market regime scanner stopped
2025-09-01 14:06:28,114 - MarketRegimeScanner - INFO - Market regime scanner shutdown complete
2025-09-01 14:06:28,114 - MarketRegimeScanner - INFO - Sleep interrupted by shutdown
